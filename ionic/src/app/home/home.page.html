<ion-header>
  <ion-toolbar>
    <ion-title>Home</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content padding>

  <div>
    Platform: {{message}}
  </div>

  <div *ngIf="mode === 'device'">

    <div *ngIf="devices.length">
      <ion-card *ngFor="let device of devices">
        <!-- <ion-img src="/assets/myImg.png"></ion-img> -->

        <ion-card-content>
          <ion-card-title>{{device.name}}</ion-card-title>

          <p>Device ID: {{device.device_id}}</p>
          <p>CHIP: {{device.chip}}</p>
          <p>Last Online: {{device.ttl | date:'short'}}</p>
          <p>
            <ion-badge *ngIf="device.online" color="secondary">Online</ion-badge>
            <ion-badge *ngIf="!device.online" color="warning">Offline</ion-badge>
          </p>
        </ion-card-content>
      </ion-card>
    </div>

    <div *ngIf="!devices.length">
      No Devices Found!
    </div>



    <ion-button (click)="scanDevice()" color="primary">Scan For devices</ion-button>

  </div>
  <div *ngIf="mode === 'scan'">
    <div *ngIf="isScanningDevice">

      Turn on Access point on your device and connect to the wifi network.
      <br/> Network name like xSmart-XXXXXX should show up on your phone.
      <br/> Connect to the network with password : 123456789
      <br/> Waiting to connect to wifi network
      <br/>
      <ion-spinner></ion-spinner>
    </div>

    <div *ngIf="xSmartConnect">
      {{devicePing.webid}}
      <br/> {{devicePing.chip}}
      <br/>
      <ion-button (click)="scanWifi()" color="primary">Scan Wifi Networks</ion-button>
      <Br/>
      <ion-list *ngFor="let wifi of wifinetworks">
        <ion-item (click)="askWifiPassword(wifi)">
          <ion-avatar slot="start">
            <ion-icon slot="start" name="wifi"></ion-icon>
          </ion-avatar>
          <ion-label>
            <h2>{{wifi.SSID}}</h2>
            <div>
              {{wifi.RSSI}} -- {{wifi.ENC}}
            </div>
          </ion-label>
        </ion-item>
      </ion-list>
    </div>


  </div>

</ion-content>