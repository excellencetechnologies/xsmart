<ion-header translucent>
  <ion-toolbar mode="ios">
    <ion-icon slot="start" color="secondry" class="menu" name="menu">
  </ion-icon>
    <ion-title>
      Home
    </ion-title>
  </ion-toolbar>
</ion-header>

<!-- Old Code -->
<ion-content padding>
  <div>
    Platform: {{message}}
  </div>
  <div *ngIf="mode === 'device'">
    <div *ngIf="devices.length">
      <ion-card *ngFor="let device of devices; trackBy: trackByDevice">
        <ion-img src="/assets/myImg.png"></ion-img>
        <ion-card-content>
          <ion-card-title>
            <ion-item>
              <ion-label (click)="askDeviceName(device);">{{device.name}}</ion-label>
              <ion-button (click)="deleteDevice(device)" fill="outline" slot="end">
                <ion-icon name="trash"></ion-icon>
              </ion-button>
            </ion-item>
          </ion-card-title>
          <p>Device ID: {{device.device_id}}</p>
          <p>CHIP: {{device.chip}}</p>
          <p>Last Online: {{device.ttl | date:'short'}}</p>
          <p>
            <ion-badge *ngIf="device.online" color="secondary">Online</ion-badge>
            <ion-badge *ngIf="!device.online" color="warning">Offline</ion-badge>
          </p>
          <p *ngIf="device.switches.length > 0"> Switches In Device </p>
          <ion-toolbar>
            <ion-buttons slot="start" *ngFor="let switch of device.switches; trackBy: trackBySwitch">
              <ion-button slot="icon-only" (click)="switchOn(switch,device)" *ngIf="switch.status === 0" color="medium">
                <ion-icon name="power"></ion-icon>
              </ion-button>
              <ion-button slot="icon-only" (click)="switchOff(switch,device)" *ngIf="switch.status === 1" color="dark">
                <ion-icon name="power"></ion-icon>
              </ion-button>
            </ion-buttons>
          </ion-toolbar>
        </ion-card-content>
      </ion-card>
    </div>
    <div *ngIf="!devices.length">
      No Devices Found!
    </div>
    <ion-button (click)="scanDevice()" color="primary">Scan For devices</ion-button>
  </div>
  <div *ngIf="mode === 'discovery'">
    <div *ngIf="!devicePing.isNew">
      This device was configured previously with name
      <b>{{devicePing.name}}</b>
      <br/> Do you want keep this name or change it?
      <br/>
      <ion-button (click)="setDeviceName(devicePing.name,devicePing.chip)" color="primary">Keep</ion-button>
      <ion-button (click)="freshDevice()" color="primary">Start New</ion-button>
    </div>
    <div *ngIf="devicePing.isNew">
      This is a new device device, please set name for the device
      <ion-item>
        <ion-input [(ngModel)]="devicePing.name" required type="text" placeholder="Device Name.."></ion-input>
        <ion-button (click)="setDeviceName(devicePing.name,devicePing.chip)" color="primary">Set Name</ion-button>
      </ion-item>
    </div>
  </div>
  <div *ngIf="mode === 'scan'">
    <div *ngIf="isScanningDevice">
      Turn on Access point on your device and connect to the wifi network.
      <br/> Network name like xSmart-XXXXXX should show up on your phone.
      <br/> Connect to the network with password : 123456789
      <br/> Waiting to connect to wifi network
      <br/>
      <ion-spinner></ion-spinner>
    </div>
    <div *ngIf="xSmartConnect">
      {{devicePing.webid}}
      <br/> {{devicePing.chip}}
      <br/> {{devicePing.name}}
      <br/>
      <ion-button (click)="scanWifi()" color="primary">Scan Wifi Networks</ion-button>
      <Br/>
      <ion-list *ngFor="let wifi of wifinetworks">
        <ion-item (click)="askWifiPassword(wifi)">
          <ion-avatar slot="start">
            <ion-icon slot="start" name="wifi"></ion-icon>
          </ion-avatar>
          <ion-label>
            <h2>{{wifi.SSID}}</h2>
            <div>
              {{wifi.RSSI}} -- {{wifi.ENC}}
            </div>
          </ion-label>
        </ion-item>
      </ion-list>
    </div>
  </div>
</ion-content>
<!-- --------------------------------------------new code---------------------- -->

<!-- <ion-content>
  <ion-row>
    <div class="Switches">
      <h3>Your Switches</h3>
    </div>
  </ion-row>
  <div class="content">
    <ion-grid>
      <ion-row align-items-start>
        <ion-col size="12">
          <ion-list class="grid" no-lines>
            <ion-item class="grid-item" *ngFor="let switch of SwitchData">
              <ion-icon slot="start" name="logo-ionic"></ion-icon>
              {{switch.switchName}}
              <ion-icon *ngIf="switch.icon != 'exclamatory'" slot="end" class="{{switch.icon}}" name="{{switch.icon}}"></ion-icon>
              <span *ngIf="switch.icon == 'exclamatory'" slot="end" class="exclamatory">!</span>
            </ion-item>
          </ion-list>
        </ion-col>
      </ion-row>
    </ion-grid>
  </div>
</ion-content> -->